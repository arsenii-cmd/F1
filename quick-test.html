<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 40px; 
            background: linear-gradient(135deg, #1a1a1a 0%, #2d0a0a 100%);
            color: #fff;
            text-align: center;
        }
        .status {
            font-size: 48px;
            margin: 40px 0;
        }
        .details {
            background: rgba(0,0,0,0.5);
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 600px;
            text-align: left;
        }
        .success { color: #0f0; }
        .error { color: #f00; }
        button {
            padding: 15px 30px;
            font-size: 18px;
            margin: 10px;
            cursor: pointer;
            background: #cc0000;
            color: white;
            border: none;
            border-radius: 5px;
        }
        button:hover { background: #ff0000; }
    </style>
</head>
<body>
    <h1>üèéÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç F1 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h1>
    <div class="status" id="status">‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
    <div class="details" id="details"></div>
    <div id="buttons" style="display:none;">
        <button onclick="window.location.href='index.html'">‚û°Ô∏è –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
        <button onclick="window.location.href='diagnose.html'">üîç –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</button>
        <button onclick="location.reload()">üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç</button>
    </div>

    <script>
        const status = document.getElementById('status');
        const details = document.getElementById('details');
        const buttons = document.getElementById('buttons');
        
        async function quickTest() {
            let results = [];
            let allGood = true;
            
            // –¢–µ—Å—Ç 1: –ó–∞–≥—Ä—É–∑–∫–∞ script.js
            try {
                const resp = await fetch('script.js');
                if (!resp.ok) throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å');
                const text = await resp.text();
                
                if (text.includes('async function loadRaces()') && 
                    text.includes('const dataCache') &&
                    text.includes('const CACHE_LIFETIME')) {
                    results.push('‚úÖ script.js –∑–∞–≥—Ä—É–∂–µ–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏');
                } else {
                    throw new Error('–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏');
                }
            } catch (e) {
                results.push('‚ùå script.js: ' + e.message);
                allGood = false;
            }
            
            // –¢–µ—Å—Ç 2: API 2025
            try {
                const resp = await fetch('https://api.jolpi.ca/ergast/f1/2025.json');
                if (!resp.ok) throw new Error('HTTP ' + resp.status);
                const data = await resp.json();
                const races = data.MRData?.RaceTable?.Races || [];
                
                if (races.length > 0) {
                    results.push(`‚úÖ API 2025 —Ä–∞–±–æ—Ç–∞–µ—Ç (${races.length} –≥–æ–Ω–æ–∫)`);
                } else {
                    throw new Error('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –≥–æ–Ω–∫–∞—Ö');
                }
            } catch (e) {
                results.push('‚ùå API 2025: ' + e.message);
                allGood = false;
            }
            
            // –¢–µ—Å—Ç 3: API 2026
            try {
                const resp = await fetch('https://api.jolpi.ca/ergast/f1/2026.json');
                if (!resp.ok) throw new Error('HTTP ' + resp.status);
                const data = await resp.json();
                const races = data.MRData?.RaceTable?.Races || [];
                
                if (races.length > 0) {
                    results.push(`‚úÖ API 2026 —Ä–∞–±–æ—Ç–∞–µ—Ç (${races.length} –≥–æ–Ω–æ–∫)`);
                } else {
                    results.push('‚ö†Ô∏è API 2026 –ø—É—Å—Ç (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Å–µ–∑–æ–Ω –µ—â—ë –Ω–µ –Ω–∞—á–∞–ª—Å—è)');
                }
            } catch (e) {
                results.push('‚ö†Ô∏è API 2026: ' + e.message + ' (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)');
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            details.innerHTML = results.map(r => `<div style="margin: 10px 0;">${r}</div>`).join('');
            buttons.style.display = 'block';
            
            if (allGood) {
                status.innerHTML = '‚úÖ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!';
                status.className = 'status success';
                details.innerHTML += '<div style="margin-top: 20px; padding: 15px; background: rgba(0,255,0,0.1); border-radius: 5px;"><strong>üéâ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!</strong><br><br>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 2025 –≥–æ–¥, —Ç–∞–∫ –∫–∞–∫ 2026 –µ—â—ë –Ω–µ –Ω–∞—á–∞–ª—Å—è –∏ API –º–æ–∂–µ—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞–Ω–Ω—ã—Ö.</div>';
            } else {
                status.innerHTML = '‚ö†Ô∏è –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã';
                status.className = 'status error';
                details.innerHTML += '<div style="margin-top: 20px; padding: 15px; background: rgba(255,0,0,0.1); border-radius: 5px;"><strong>–ß—Ç–æ –¥–µ–ª–∞—Ç—å:</strong><br>1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ–ª–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É (–∫–Ω–æ–ø–∫–∞ –Ω–∏–∂–µ)<br>2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)<br>3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –æ—à–∏–±–æ–∫</div>';
            }
        }
        
        quickTest();
    </script>
</body>
</html>
